<html>

<head>
  <title>UW IoT Lab2</title>
</head>

<body>

  <h2>UW IoT | Lab 2: GPio API and Webapp</h2>
  <h3>Switch: {{'On' if switch else 'Off'}}</h3>
  <h4>RED LED (on GPIO18): {{'ON' if led1 else 'OFF'}}</h4>
  <h4>GREEN LED (on GPIO13): {{'ON' if led2 else 'OFF'}}</h4>
  <h4>BLUE LED (on GPIO23): {{'ON' if led3 else 'OFF'}}</h4>

  <p>
    <button style="width:100px; height:50px; color:white; background:orange" type='button' id='red_led_btn'>OSU</button><br><br>
    <button style="width:100px; height:50px; color:white; background:black" type='button' id='grn_led_btn'>GO</button><br><br>
    <button style="width:100px; height:50px; color:white; background:orange" type='button' id='blu_led_btn'>BEAVS!</button><br><br>
  </p>

  <script src="https://code.jquery.com/jquery-1.12.9.min.js"></script>

  <script>
    // start executing only after document has loaded
    $(document).ready(function(){
      // establish global variables for LED status
      var led1;
      var led2;
      var led3;
      
      // The button click functions run asychronously in the browser
      
      $('#red_led_btn').click(function(){
        if(led1 === "OFF") {led1 = "ON";} else {led1 = "OFF";}
        var params = 'led=1&state='+led1;
        console.log('Led Command with params:' + params);
        $.post('/ledcmd', params, function(data, status){
          console.log("Data: " + data + "\nStatus: " + status);
        })
      })
      
      $('#grn_led_btn').click(function(){
        if(led2 === "OFF") {led2 = "ON";} else {led2 = "OFF";} 
        var params = 'led=2&state='+led2;
        console.log('Led Command with params:' + params);
        $.post('/ledcmd', params, function(data, status){
          console.log("Data: " + data + "\nStatus: " + status);
        })
      })
        
      $('#blu_led_btn').click(function(){
        if(led3 === "OFF") {led3 = "ON";} else {led3 = "OFF";}
        var params = 'led=3&state='+led3;
        console.log('Led Command with params:' + params);
        $.post('/ledcmd', params, function(data, status){
          console.log("Data: " + data + "\nStatus: " + status);
        })
      })
    })
  </script>

</body>

</html>